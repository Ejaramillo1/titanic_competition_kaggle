---
title: "Logit_titanic_survival"
output: pdf_document
---


# Sobrevivientes del Titanic

Los aspirantes a científicos de datos generalmente somos personas curiosas a las que les gusta navegar por internet buscando recursos que apoyen y consoliden nuestros conocimientos dentro de ésta área del conocimiento.

Un sitio muy popular donde se pueden encontrar mucha información sobre este tema es el sitio web **kaggle.com** en el que se desarrollan competencias respecto a la estimación de modelos econométricos.

La base de datos del Titanic es uno de los primeros pasos para adentrarse en el mundo de la ciencia de datos con muchos recursos a la mano. El objetivo de la base de datos y, la competencia es tratar de predecir si un pasajero sobrevive o no. 

Como en todos los ejercicios primero vamos a cargar los paquetes de funciones que se utilizarán en el ejercicio de estimación.


```{r}

library("easypackages")
my_packages <- c("tidyverse")
libraries(my_packages)

```

Posteriormente vamos a subir la tabla de datos con la que trabajaremos

```{r}

train <- read_csv("train.csv")


```

Luego vamos a dar un vistazo rápido a la base de datos


```{r}

glimpse(train)

```


Como podemos ver arriba, en nuestra tabla de datos hay doce variables de las cuales **fare**, **Age** y **PassengerId**, las 9 variables más con de tipo categoricas. 


Ahora vamos a observar la distribución de las variables cuantitativas.


```{r}

train %>%
  keep(is.numeric) %>%
  select(Age, Fare) %>%
  gather() %>%
  ggplot(aes(x = value)) + 
  facet_wrap(~key, scales = "free") +
  geom_histogram(fill = "green")


```

Podemos ver por ejemplo que la edad tiene una distribución casi normal con un sezgo positivo, adicionalmente observamos que la tarifa está sezgada hacia la derecha. Observamos también que las variables tienen algunos datos atípicos principalmente la variable **_fare_**. También podemos observar que las variables están en diferentes escalas por lo que les aplicaremos una técnica de normalización llamada **_Z score normalization_** con la función scale 


```{r} 

train %>%
  keep(is.numeric) %>%
  select(Age, Fare) %>%
  mutate(Age = scale(Age),
         Fare = scale(Fare)) %>%
  gather() %>%
  ggplot(aes(x=value)) +
  facet_wrap(~key, scales = "free") +
  geom_histogram()


```

Podemos observar que la variable edad tiene un comportamiento casi normal con algunas exepciones o casos atípicos de personas de avanzada edad. La variable que tiene mayores problemas es Fare. Se observa en el histograma que no tiene un comportamiento normal debido a ciertas variables atípicas. Vamos a confirmar esto con un diagrama de hoja y bigotes que nos permite visualizar de mejor manera las observaciones atípicas. 

```{r} 

train %>%
  keep(is.numeric) %>%
  select(Age, Fare) %>%
  mutate(Age = scale(Age),
         Fare = scale(Fare)) %>%
  gather() %>%
  ggplot(aes(y=value)) +
  facet_wrap(~key, scales = "free") +
  geom_boxplot()


```

Suponemos que la variable Fare está relacionada con la clase donde viajan los pasajeros, por lo que vamos a observar los valores mínimos, máximos y desviación estándar de las variables. 


```{r}

train %>%
  filter(Fare != 0) %>%
  group_by(Pclass) %>%
  summarise(max = max(Fare, na.rm = TRUE), media = mean(Fare, na.rm = TRUE), min = min(Fare, na.rm = TRUE), sd = sd(Fare, na.rm = TRUE))


train %>%
  select(Fare) %>%
  filter(Fare != 0) %>%
  arrange(desc(Fare))



```































